<div class="container">
  <div *ngIf="assignment && !assignment.classroom?.codeSearch" class="alert alert-warning">
    <h4 class="alert-heading">
      Code Search is disabled
    </h4>
    To use Code Search, you need to enable it in the
    <a routerLink="../edit/classroom">
      Assignment Classroom Settings
    </a>
    .
    Code will be indexed when importing new solutions.
  </div>
  <div class="form">
    <div class="form-group">
      <label for="searchArea">Search for Code Snippet</label>
      <textarea class="form-control text-monospace" id="searchArea"
                [ngModel]="search$.value" (ngModelChange)="search$.next($event)"
                [disabled]="!assignment?.classroom?.codeSearch"
      ></textarea>
    </div>
    <div class="form-group">
      <label for="globInput">Filename Glob</label>
      <input type="" class="form-control" id="globInput" [ngModel]="glob$.value" (ngModelChange)="glob$.next($event)">
    </div>
  </div>
  <span class="text-muted">
    {{ results.length }} Results
  </span>
  <ul class="list-group">
    <li *ngFor="let result of results" class="list-group-item">
      <h4>
        <ng-container *ngIf="solutions[result.solution] as solution">
          <a [routerLink]="['../solutions', solution._id]">
            Solution
          </a>
          by
          {{ solution.author.name || solution.author.github }}
        </ng-container>
        <span class="text-muted">
          {{ result.snippets.length }} Snippets
        </span>
      </h4>
      <ul class="list-group">
        <li *ngFor="let snippet of result.snippets" class="list-group-item">
          <app-snippet [snippet]="snippet"></app-snippet>
        </li>
      </ul>
    </li>
  </ul>
</div>
