<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<title>Scenario</title>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet"
	      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
	      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
	      crossorigin="anonymous">
	<!-- CodeMirror -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.css"
	      integrity="sha256-vZ3SaLOjnKO/gGvcUWegySoDU6ff33CS5i9ot8J9Czk=" crossorigin="anonymous"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/dialog/dialog.min.css"
	      integrity="sha256-OjF42ew3ra0/zNWgjfDTydf609RXv0cXcassXEeW0O8=" crossorigin="anonymous"/>
	<link rel="stylesheet"
	      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/search/matchesonscrollbar.min.css"
	      integrity="sha256-TrmQO7NczQagS8xzbjbgGAhtCl3w+Bo8M9iTvx9uaVM=" crossorigin="anonymous"/>
	<!-- Custom -->
	<link rel="stylesheet" href="style.css">
</head>
<body>

<header>

<noscript>
	<div class="alert alert-warning" role="alert">
		<h4 class="alert-heading">JavaScript is disabled!</h4>
		<p>
			This website requires JavaScript to work correctly. Please
			<a target="_blank" rel="noopener noreferrer"
			   href="https://www.whatismybrowser.com/guides/how-to-enable-javascript/auto">
				enable JavaScript
			</a>
			to use the Fulib Web App.
		</p>
	</div>
</noscript>


</header>

<main role="main" class="wrap pb-5 m-4">
	<div class="row">
		<div class="col-md-12 col-lg-6">
			<h2>Scenario</h2>
			<p>
				Load Example:
				<select id="exampleSelect" onchange="selectExample(this.value)">
					<option value="">-</option>
				</select>
				<span class="float-right">
					<button type="button" class="btn btn-outline-secondary btn-sm" data-toggle="modal"
					        data-target="#configModal">
						Configure Project
					</button>
					<button type="button" class="btn btn-outline-primary btn-sm" data-toggle="tooltip"
					        title="Shortcuts: Ctrl-&#9166; / &#8984;&#9166;, Ctrl-S / &#8984;S" onclick="submit()">
						Compile and Run
					</button>
				</span>
			</p>
			<p>
				<textarea class="form-control" id="scenarioInput"></textarea>
			</p>
		</div>

		<div class="col-md-12 col-lg-6">
			<h2>Java Test Code</h2>
			<p></p>
			<div class="progress">
				<div id="scenarioCompileProgress" class="progress-bar bg-success" role="progressbar"
				     style="width: 24.25%">
					Scenario Compiler
				</div>
				<div class="progress-bar bg-transparent" role="progressbar" style="width: 1%"></div>
				<div id="modelCompileProgress" class="progress-bar bg-success" role="progressbar"
				     style="width: 24.25%">
					Java Model Compiler
				</div>
				<div class="progress-bar bg-transparent" role="progressbar" style="width: 1%"></div>
				<div id="testCompileProgress" class="progress-bar bg-success" role="progressbar"
				     style="width: 24.25%">
					Java Test Compiler
				</div>
				<div class="progress-bar bg-transparent" role="progressbar" style="width: 1%"></div>
				<div id="testRunProgress" class="progress-bar bg-success" role="progressbar" style="width: 24.25%">
					Test Run
				</div>
			</div>
			<p></p>
			<p>
        <textarea class="form-control" id="javaTestOutput">
// press Ctrl-Enter within the scenario editor to generate Java.
</textarea>
			</p>

		</div>
	</div>

	<div class="row">
		<div class="col-md-12 col-lg-6">
			<h2>Class Diagram</h2>
			<div class="svg" id="classDiagram"></div>
		</div>

		<div class="col-md-12 col-lg-6">
			<h2>Object Diagrams</h2>
			<div class="svg" id="objectDiagrams"></div>
			<ul class="nav nav-tabs" id="objectDiagramTab" role="tablist"></ul>
			<div class="tab-content" id="objectDiagramTabContent"></div>
		</div>
	</div>
</main>

<footer class="page-footer font-small">


<div class="navbar footer bg-light">
	<p>
		<a href="https://github.com/fujaba/fulib.org" title="Web App on GitHub">Web App</a>
		v$$version$$
		&mdash;
		<a href="https://github.com/fujaba/fulibScenarios" title="Fulib Scenarios on GitHub">Fulib Scenarios</a>
		v$$fulibScenariosVersion$$
		&mdash;
		<a href="https://github.com/fujaba/fulibMockups" title="Fulib Mockups on GitHub">Fulib Mockups</a>
		v$$fulibMockupsVersion$$
	</p>
	<p>
		<a href="#" data-toggle="modal" data-target="#feedbackModal">Leave Feedback</a>
		&mdash;
		<a href="http://www.uni-kassel.de/uni/impressum.html">Imprint</a>
		&mdash;
		<a href="https://www.uni-kassel.de/uni/footer-2/datenschutz/">Privacy Policy</a>
		&mdash;
		<a href="#" data-toggle="modal" data-target="#privacyModal">Edit Privacy Preferences</a>
	</p>
</div>

</footer>

<div class="modal fade"
     id="privacyModal"
     tabindex="-1"
     role="dialog"
     aria-labelledby="privacyModalLabel"
     aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="privacyModalLabel">We value your privacy!</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<p>
					This website uses cookies and other local data storage technology to make your experience more
					pleasant.
					Remote data is stored anonymously and used only for scientific and analytic purposes.
				</p>

				<p>
					Please select your preferred privacy option below:
				</p>

				<div class="form-check">
					<label class="form-check-label">
						<input id="privacy-all" class="form-check-input" type="radio" name="privacy" value="all">
						I agree to the use of local and remote data storage.
					</label>
				</div>
				<div class="form-check">
					<label class="form-check-label">
						<input id="privacy-local" class="form-check-input" type="radio" name="privacy" value="local">
						I agree to the use of local data storage, but not remote.
					</label>
				</div>
				<div class="form-check">
					<label class="form-check-label">
						<input id="privacy-none" class="form-check-input" type="radio" name="privacy" value="none">
						I do not agree to the use of local or remote data storage.
					</label>
				</div>
				<div class="form-check">
					<label class="form-check-label">
						<input id="privacy-nobanner" class="form-check-input" type="radio" name="privacy"
						       value="nobanner">
						I do not agree to the use of local or remote data storage,
						except for the use of local storage to hide this popup in the future.
					</label>
				</div>

				<p></p>

				<p>
					You can show this popup again and edit your preferences at any time by clicking
					<b>Edit Privacy Preferences</b> at the bottom of the page.
				</p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-dismiss="modal" onclick="savePrivacy()">
					Save & Close
				</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="configModal" tabindex="-1" role="dialog" aria-labelledby="configModalLabel"
     aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="configModalLabel">Configure Project</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<form>
					<div class="form-group">
						<label for="packageNameField">Package Name</label>
						<input type="text" class="form-control" id="packageNameField" placeholder="org.example">
					</div>
					<div class="form-group">
						<label for="scenarioFileNameField">Scenario File Name</label>
						<input type="text" class="form-control" id="scenarioFileNameField" placeholder="Scenario.md">
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" onclick="saveConfig()" data-dismiss="modal">
					Save & Close
				</button>
			</div>
			<div class="modal-header">
				<h5 class="modal-title">Download as Gradle Project</h5>
			</div>
			<div class="modal-body">
				<p>
					You can download your scenario prepared as a Gradle project.
					Just extract the downloaded Zip file to a folder and open it with your favorite IDE.
					Make sure to run the <code>check</code> task afterwards to generate Java classes and execute the
					tests.
				</p>
				<form>
					<!--
					<div class="form-check">
						<input type="checkbox" class="form-check-input" id="includeJavaFXCheckBox">
						<label class="form-check-label" for="includeJavaFXCheckBox">Include JavaFX Dependency</label>
					</div>
					-->
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-success" onclick="downloadProjectZip()">
					Download
				</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade"
     id="feedbackModal"
     tabindex="-1"
     role="dialog"
     aria-labelledby="feedbackModalLabel"
     aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="feedbackModalLabel">Leave Feedback</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<p>
					Please select the relevant option below.
					You will be redirected to a page with further instructions.
				</p>
				<p>
					I want to leave feedback regarding...
				</p>
				<p>
					<a role="button" class="btn btn-outline-secondary btn-block"
					   href="https://github.com/fujaba/fulibScenarios/issues/new/choose">
						The scenario or Java code (Fulib Scenarios)
					</a>
					<a role="button" class="btn btn-outline-secondary btn-block"
					   href="https://github.com/fujaba/fulibMockups/issues/new/choose">
						The HTML mockups (Fulib Mockups)
					</a>
					<a role="button" class="btn btn-outline-secondary btn-block"
					   href="https://github.com/fujaba/fulibTools/issues/new/choose">
						The object and class diagrams (Fulib Tools)
					</a>
					<a role="button" class="btn btn-outline-secondary btn-block"
					   href="https://github.com/fujaba/fulib/issues/new/choose">
						The generated model classes (Fulib)
					</a>
					<a role="button" class="btn btn-outline-secondary btn-block"
					   href="https://github.com/fujaba/fulibGradle/issues/new/choose">
						The Gradle plugin (Fulib Gradle)
					</a>
					<a role="button" class="btn btn-outline-secondary btn-block"
					   href="https://github.com/fujaba/fulib.org/issues/new/choose">
						This Website itself (fulib.org)
					</a>
				</p>
				<div class="text-center">
					<script>
						const s = '<a href="mailto:spam@fbi.gov">I am not sure / I want to send an E-Mail instead</a>';
						document.write(s.replace('spam', 'contact').replace('fbi.gov', 'fulib.org'));
					</script>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

<!-- CodeMirror JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.js"
        integrity="sha256-dPTL2a+npIonoK5i0Tyes0txCMUWZBf8cfKRfACRotc=" crossorigin="anonymous"></script>
<!-- Java Mode -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/clike/clike.min.js"
        integrity="sha256-r3w/hpk34pH7CPIau2OKWqgJ6ZZY3DSJdX7W1308ODI=" crossorigin="anonymous"></script>
<!-- Markdown Mode -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/markdown/markdown.min.js"
        integrity="sha256-MxEruN/osqaLv1a8apNK9evzLXU7iIb20rxgwxR/Lzc=" crossorigin="anonymous"></script>
<!-- Required by Search -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/dialog/dialog.min.js"
        integrity="sha256-G+QhvxjUNi5P5cyQqjROwriSUy2lZtCFUQh+8W1o6I0=" crossorigin="anonymous"></script>
<!-- Required by Search -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/search/searchcursor.min.js"
        integrity="sha256-y7nxCQ9bT6p4fEq9ylGxWfMQBpL6ingXkav6Nr1AcZ8=" crossorigin="anonymous"></script>
<!-- Ctrl-F Search -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/search/search.min.js"
        integrity="sha256-Eb0Zt0ohT7ZPb8D+I7WFsazhXW2YLnHA97Le4ABjjXk=" crossorigin="anonymous"></script>
<!-- Alt+G to jump to line and column -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/search/jump-to-line.min.js"
        integrity="sha256-OHwCcjHBh4njBSsd20+1IAxuBv3jTg7xXuP4sUfPWtA=" crossorigin="anonymous"></script>
<!-- Highlight search matches in the editor -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/search/match-highlighter.min.js"
        integrity="sha256-oUukAVKIfv5qQCT4EhPrXmJJTSZSOrk3lxWkRUm5ZBw=" crossorigin="anonymous"></script>
<!-- Required by matchesonscrollbar -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/scroll/annotatescrollbar.min.js"
        integrity="sha256-oJXLGidjXaMY+KagVULyv8+Qyl0IwthDioXjYm6aTu4=" crossorigin="anonymous"></script>
<!-- Shows search matches on the scroll bar -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/search/matchesonscrollbar.min.js"
        integrity="sha256-F4dwoyLuBaA5Ltkam/kdTUGxBpZuk7uulSRQHablI3Q=" crossorigin="anonymous"></script>

<!-- Custom JS -->
<script type="text/javascript" src="index.js"></script>
</body>
</html>
