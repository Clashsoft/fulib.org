<div class="container">
  <h1>{{assignment ? assignment.title : 'Loading...'}}</h1>
  <p class="text-muted">
    <ng-container *ngIf="assignment">
      by {{assignment.author}}
      &mdash;
      <a href="mailto:{{assignment.email}}">{{assignment.email}}</a>
      &mdash;
      Deadline: {{assignment.deadline | date:'medium'}}
    </ng-container>
    <ng-container *ngIf="!assignment">
      Loading...
    </ng-container>
  </p>

  <p *ngIf="assignment" [innerHTML]="assignment.descriptionHtml | safeHtml">
  </p>
  <p *ngIf="!assignment">
    Loading Description...
  </p>

  <h2>Tasks</h2>
  <ol *ngIf="assignment && solution">
    <li *ngFor="let task of assignment.tasks; let i = index"
        [class.text-success]="solution.results[i].points == task.points"
        [class.text-danger]="solution.results[i].points < task.points"
    >
      {{task.description}}
      <span class="badge"
            [class.badge-success]="solution.results[i].points == task.points"
            [class.badge-danger]="solution.results[i].points < task.points"
      >
        {{solution.results[i].points}} / {{task.points}}
      </span>
    </li>
  </ol>
  <p *ngIf="!assignment || !solution">
    Loading Tasks...
  </p>

  <h2><label for="solutionInput">Solution</label></h2>
  <p>
    <app-autotheme-codemirror id="solutionInput" [content]="solution ? solution.solution : 'Loading...'" [options]="{
      mode: 'markdown',
      lineNumbers: true,
      lineWrapping: true,
      styleActiveLine: true,
      readOnly: true
    }"></app-autotheme-codemirror>
  </p>

  <h2>Info</h2>

  <div class="form">
    <div class="form-group row">
      <label for="nameInput" class="col-sm-2 col-form-label">Name</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="nameInput" readonly
               [ngModel]="solution ? solution.name : 'Loading...'">
      </div>
    </div>
    <div class="form-group row">
      <label for="studentIDInput" class="col-sm-2 col-form-label">Student ID</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="studentIDInput" readonly
               [ngModel]="solution ? solution.studentID : 'Loading...'">
      </div>
    </div>
    <div class="form-group row">
      <label for="emailInput" class="col-sm-2 col-form-label">E-Mail</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="emailInput" readonly
               [ngModel]="solution ? solution.email : 'Loading...'">
      </div>
    </div>
  </div>

  <p class="text-center" *ngIf="solution">
    Submitted <b>{{solution.timeStamp | date:'medium'}}</b>.
  </p>
</div>
